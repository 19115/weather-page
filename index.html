<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <style>
      .bg-sunny {
        background: linear-gradient(to right, #fceabb, #f8b500);
        color: #222;
      }
      .bg-rainy {
        background: linear-gradient(to right, #74ebd5, #acb6e5);
        color: #222;
      }
      .bg-cloudy {
        background: linear-gradient(to right, #bdc3c7, #2c3e50);
        color: #fff;
      }
      .bg-calm {
        background: linear-gradient(to right, #dfe9f3, #ffffff);
        color: #222;
      }
      .card {
        background-color: rgba(255, 255, 255, 0.85);
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
    </style>

    <title>Weather chart</title>
  </head>
  <body>
    <div class="container">
      <div class="card shadow p-4 w-auto mx-auto" style="max-width: 800px">
        <div class="row mb-3">
          <div class="col-12 col-md-3">
            <input
              type="text"
              class="form-control w-100"
              id="inputCity"
              placeholder="Enter city name"
            />
            <button class="btn btn-info mt-2" id="cityBtn">Search</button>
          </div>
          <div class="col-12 col-md-3">
            <select id="inputWeather" class="form-select w-100">
              <option value="" selected disabled>Select Today's weather</option>
              <option value="Sunny">Sunny</option>
              <option value="Rainy">Rainy</option>
              <option value="Cloudy">Cloudy</option>
              <option value="Calm">Calm</option>
            </select>
            <button class="btn btn-info mt-2" id="weatherBtn">
              Change Weather
            </button>
          </div>
          <div class="col-12 col-md-6">
            <h4 class="text-info" id="city">San Francisco</h4>
            <p id="weather">
              <span id="weatherText">partly cloudy</span>
              <span id="weatherIcon" class="ms-2"></span>
            </p>
            <p id="temperature">18° C</p>
          </div>
        </div>
        <!-- timedate div -->
        <div id="dateTimeDisplay" class="text-center mt-3 text-muted"></div>
      </div>
    </div>
    <script>
      let input = document.getElementById("inputCity");
      let cityDisplay = document.getElementById("city");

      document.getElementById("cityBtn").onclick = function () {
        let cityName = input.value.trim();
        if (cityName) {
          cityDisplay.textContent = cityName;
          input.value = "";
        } else {
          alert("please enter a city name");
        }
      };
      const WeatherToTemp = {
        Sunny: [28, 34],
        Rainy: [16, 22],
        Cloudy: [18, 24],
        Calm: [20, 25],
      };
      //  function to get a random temperature
      function getRandomTemp(min, max) {
        return Math.floor(Math.random() * (max - min + 1) + min);
      }

      const weatherIcons = {
        Sunny: "fas fa-sun text-warning",
        Rainy: "fas fa-cloud-showers-heavy text-primary",
        Cloudy: "fas fa-cloud text-secondary",
        Calm: "fas fa-wind text-info",
      };
      const weatherBackground = {
        Sunny: "bg-sunny",
        Rainy: "bg-rainy",
        Cloudy: "bg-cloudy",
        Calm: "bg-calm",
      };

      let Winput = document.getElementById("inputWeather");
      let weatherDisplay = document.getElementById("weather");
      let tempEl = document.getElementById("temperature");

      let weatherText = document.getElementById("weatherText");
      let weatherIcon = document.getElementById("weatherIcon");

      document.getElementById("weatherBtn").onclick = function () {
        let Weather = Winput.value;
        if (Weather) {
          weatherText.textContent = Weather;

          let range = WeatherToTemp[Weather];
          if (range) {
            tempEl.textContent = getRandomTemp(range[0], range[1]) + " °C";
          } else {
            tempEl.textContent = "_";
          }

          weatherIcon.className = "";
          if (weatherIcons[Weather]) {
            weatherIcon.className = weatherIcons[Weather];
          }

          let body = document.body;

          Object.values(weatherBackground).forEach((cls) =>
            body.classList.remove(cls)
          );

          let bodyClass = weatherBackground[Weather];
          if (bodyClass) {
            body.classList.add(bodyClass);
          }

          Winput.selectedIndex = 0;
        } else {
          alert("what about the weather?");
        }
      };
      //   datetime function
      function updateTime() {
        const now = new Date();
        const options = {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: true,
        };
        const formatted = now.toLocaleString("en-US", options);
        document.getElementById("dateTimeDisplay").textContent = formatted;
      }

      updateTime();
      setInterval(updateTime, 1000);
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
